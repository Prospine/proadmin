<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" href="../image/favicon.png" type="image/x-icon" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Bricolage+Grotesque:opsz,wght@12..96,200..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="../css/changelog.css">
  <style>
    body {
      background: #f7f8fa;
      color: #222;
    }

    header h1,
    .log-entry h2 {
      color: #1a202c;
    }

    .segment {
      padding-left: 0;
    }

    .log-entry {
      background: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 12px rgba(0, 0, 0, 0.07);
      border: 1px solid #e5e7eb;
      margin-bottom: 2.5rem;
      padding: 1.5rem 2rem;
      transition: box-shadow 0.2s, border 0.2s, background 0.2s;
    }

    .log-entry:hover {
      box-shadow: 0 6px 24px rgba(0, 0, 0, 0.13);
      border: 1.5px solid #a5b4fc;
      background: #f7f8fa;
      color: #222;
    }

    .unreleased-modern {
      background: linear-gradient(90deg, #e0e7ff 0%, #f1f5f9 100%);
      border: 2px solid #6366f1;
      color: #222;
      box-shadow: 0 2px 16px rgba(99, 102, 241, 0.08);
      margin-bottom: 2.5rem;
      padding: 2rem 2.5rem 1.5rem 2.5rem;
      border-radius: 16px;
      position: relative;
      overflow: hidden;
      transition: box-shadow 0.2s, border 0.2s, background 0.2s;
    }

    .unreleased-modern:hover {
      box-shadow: 0 6px 24px rgba(99, 102, 241, 0.13);
      border: 2px solid #3730a3;
      background: linear-gradient(90deg, #e0e7ff 0%, #f7f8fa 100%);
      color: #222;
    }

    .log-entry::before,
    .log-entry:not(:last-child)::after {
      display: none;
    }

    .badge {
      font-weight: 600;
      letter-spacing: 0.03em;
    }

    .unreleased-modern {
      background: linear-gradient(90deg, #e0e7ff 0%, #f1f5f9 100%);
      border: 2px solid #6366f1;
      color: #222;
      box-shadow: 0 2px 16px rgba(99, 102, 241, 0.08);
      margin-bottom: 2.5rem;
      padding: 2rem 2.5rem 1.5rem 2.5rem;
      border-radius: 16px;
      position: relative;
      overflow: hidden;
    }

    .unreleased-modern h2 {
      font-size: 1.4rem;
      margin-bottom: 0.7rem;
      color: #3730a3;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .unreleased-modern .meta {
      color: #6366f1;
      font-size: 1.05rem;
      margin-bottom: 1.2rem;
    }

    .unreleased-modern ul.changes li {
      margin-bottom: 0.7rem;
    }

    .unreleased-modern .tag {
      background: #6366f1;
      color: #fff;
      border-radius: 4px;
      padding: 2px 8px;
      font-size: 0.9em;
      margin-right: 0.5em;
    }

    .dev-banner {
      background: #fef9c3;
      color: #a16207;
      border: 1.5px solid #fde047;
      border-radius: 8px;
      margin-bottom: 10px;
      font-weight: 500;
      padding: 10px 20px;
      display: flex;
      align-items: center;
      gap: 8px;
      justify-content: center;
    }

    #changelog-search {
      background: #f1f5f9;
      border: 1.5px solid #cbd5e1;
      color: #222;
      transition: border 0.2s;
    }

    #changelog-search:focus {
      border: 1.5px solid #6366f1;
      outline: none;
    }

    @media (max-width: 700px) {

      .log-entry,
      .unreleased-modern {
        padding: 1rem 0.7rem;
      }
    }
  </style>
  <title>Changelog</title>
</head>

<body>
  <header>
    <div class="nav"><a href="dashboard.php"> <i class="fa-solid fa-arrow-left"> Back</i></a>
    </div>
    <div class="text">
      <h1>Changelog</h1>
      <div class="dev-banner"
        style="background:#ffeeba;color:#856404;padding:10px 20px;border-radius:6px;margin-bottom:10px;font-weight:500;">
        <i class="fa-solid fa-triangle-exclamation"></i> This page is under active development. Features and layout may
        change.
      </div>
      <p>
        Stay up to date with the latest changes! Since the first release, we’ve been
        working hard to make this project the best it can be. Thanks everyone for your feedback ❤️
      </p>
      <div style="margin-top:15px;">
        <input id="changelog-search" type="text" placeholder="Search changelog..."
          style="padding:7px 12px;width:260px;border-radius:5px;border:1px solid #ccc;font-size:1em;">
      </div>
    </div>
  </header>

  <main>

    <div class="segment">
      <div class="unreleased-modern">
        <h2><i class="fa-solid fa-flask"></i> Unreleased <span class="badge progress">Upcoming</span></h2>
        <div class="meta">Planned features, improvements, and bug fixes for the next release.</div>
        <ul class="changes">
          <li><span class="tag">Planned</span> <strong>Changelog Page Enhancements:</strong>
            <ul>
              <li>Search and filter functionality for easier navigation.</li>
              <li>Sync with <code>CHANGELOG.md</code> for consistency.</li>
              <li>Improved mobile responsiveness and accessibility.</li>
              <li>More links to documentation and related commits.</li>
            </ul>
          </li>
          <li><span class="tag">Planned</span> <strong>General Improvements:</strong>
            <ul>
              <li>Performance optimizations and UI refinements.</li>
              <li>Additional reporting and analytics features.</li>
              <li>Enhanced security and audit logging.</li>
            </ul>
          </li>
          <li><span class="tag">Planned</span> <strong>Global & Inter-Branch Functionality:</strong>
            <ul>
              <li>Global reports and search capabilities across all branches associated with the clinic.</li>
              <li>Search for patients by their unique UID for seamless data lookup and transfer between branches.</li>
            </ul>
          </li>
          <li><span class="tag">Planned</span> <strong>User & System Management:</strong>
            <ul>
              <li>Notification, Logs, and User Profile/Settings management pages.</li>
              <li>Email notifications to Junior Doctors upon patient assignment.</li>
            </ul>
          </li>
          <li><span class="tag">Planned</span> <strong>Financial & Follow-up Improvements:</strong>
            <ul>
              <li>Treatment refund option that generates a corresponding voucher.</li>
              <li>More comprehensive follow-up tracking for both inquiries and treated patients.</li>
            </ul>
          </li>
          <li><span class="tag">Planned</span> <strong>Accessibility & Internationalization:</strong>
            <ul>
              <li>Multi-language support via a dropdown, using Google Translate for localization.</li>
            </ul>
          </li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.3.0 <span class="badge live">Feature &amp; Fix</span></h2>
        <div class="meta">
          October 16, 2025 · Dynamic Reporting & Schedule Logic Fix
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> <strong>Dynamic Summary Totals for Reports:</strong>
            <ul>
              <li>All major report pages (Tests, Registrations, Patients) now feature dynamic summary cards that calculate and display aggregate financial data (e.g., Total Billed, Paid, Due) based on the currently applied filters.</li>
              <li>Registration reports provide a detailed revenue breakdown by status: Consulted (Green), Pending (Yellow), and Closed (Red).</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Report UI &amp; UX:</strong>
            <ul>
              <li>Enhanced the styling of all report tables with color-coded, right-aligned amount columns for better financial clarity.</li>
              <li>Standardized status pill styling across all report pages for a consistent user experience.</li>
            </ul>
          </li>
          <li><span class="tag fixed">Fixed</span> <strong>Critical Scheduling Logic:</strong>
            <ul>
              <li>Resolved a major bug where time slots for 'closed' or 'cancelled' appointments remained blocked. The <code>get_slots.php</code> API now correctly frees up these slots, allowing them to be booked again.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Schedule Views:</strong>
            <ul>
              <li>The schedule views on the Dashboard, Weekly Schedule page, and Today's Appointments page have been updated to hide 'closed' and 'cancelled' events, providing a cleaner and more accurate view of the active agenda.</li>
            </ul>
          </li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.2.9 <span class="badge live">Feature &amp; UX</span></h2>
        <div class="meta">
          October 15, 2025 · Directional Page Transitions, UI/UX Improvements
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> <strong>Directional Page Transitions:</strong>
            <ul>
              <li>Implemented a new, app-like page transition system that slides pages in from the right or left based on the user's navigation direction in the main menu.</li>
              <li>Navigating forward (e.g., Dashboard → Inquiry) slides the new page in from the right.</li>
              <li>Navigating backward (e.g., Inquiry → Dashboard) slides the new page in from the left.</li>
            </ul>
          </li>
          <li><span class="tag added">Added</span> <strong>New Transition Logic:</strong>
            <ul>
              <li>Created <code>page_transition.js</code> to track navigation history using <code>sessionStorage</code> and apply the correct animation class.</li>
              <li>Created <code>page_transition.css</code> with new `slideInFromLeft` and `slideInFromRight` animations.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Page Structure for Animations:</strong>
            <ul>
              <li>Wrapped the content of all views in a <code>.page-wrapper</code> div. This was a critical fix to ensure the slide animations are visible and not clipped by the browser's default overflow settings.</li>
            </ul>
          </li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.2.8 <span class="badge live">Feature Release</span></h2>
        <div class="meta">
          October 14, 2025 · Advanced Schedule & Slot Management, UI/UX Improvements
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> <strong>Advanced Scheduling System:</strong>
            <ul>
              <li>Implemented a dedicated schedule management page with separate views for Physiotherapy and Speech
                Therapy.</li>
              <li>Introduced service-specific time slots with capacity tracking:
                <ul>
                  <li><strong>Physiotherapy:</strong> 1.5-hour blocks from 9:00 AM to 7:30 PM with a 10-patient
                    capacity.</li>
                  <li><strong>Speech Therapy:</strong> 1-hour blocks from 3:00 PM to 7:00 PM with a 1-patient capacity.
                  </li>
                </ul>
              </li>
            </ul>
          </li>
          <li><span class="tag added">Added</span> <strong>Appointment Management Tools:</strong>
            <ul>
              <li>"Add to Schedule" feature allows for manually booking appointments for existing patients through a
                search-and-select modal.</li>
              <li>"Reschedule" functionality enables staff to easily move an existing appointment to a new date and time
                slot.</li>
            </ul>
          </li>
        </ul>

        <ul class="changes">
          <li><span class="tag added">Added</span> <strong>Test Itemization System:</strong>
            <ul>
              <li>Introduced a new `test_items` table to allow adding multiple tests to a single patient order, enabling
                comprehensive billing for complex cases.</li>
              <li>Added an "Add More Test" button and modal popup within the test details drawer, creating a seamless
                workflow for adding subsequent tests.</li>
              <li>Created a new API (`add_test_item.php`) to securely handle the creation and database insertion of new
                test items, linked to the original test order.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Test Details Drawer UI/UX:</strong>
            <ul>
              <li>The drawer has been completely redesigned to display each test (original and additional) in its own
                distinct card, providing a clear, itemized view.</li>
              <li>Each test card now includes its own financial breakdown (Total, Paid, Due) and individual controls for
                updating Test Status and Payment Status.</li>
              <li>An "Overall Financial Summary" card was added at the end of the drawer to show the aggregated grand
                totals for the entire order.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>API & Data Handling:</strong>
            <ul>
              <li>The `fetch_test.php` API was enhanced to retrieve the main test record along with all its associated
                `test_items`, providing a complete data package to the UI.</li>
              <li>A new, unified API (`update_test_item.php`) was created to manage status and payment updates for both
                the main `tests` table and the new `test_items` table, reducing code duplication.</li>
            </ul>
          </li>
          <li><span class="tag added">Added</span> <strong>Client-Side Calculations:</strong>
            <ul>
              <li>The "Add New Test Item" modal now features real-time, client-side calculation of the "Due Amount" as
                the user types, improving user experience.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Database Schema:</strong>
            <ul>
              <li>Added a `payment_status` column to the `test_items` table to allow for granular payment tracking for
                each individual test.</li>
            </ul>
          </li>
          <li><span class="tag fixed">Fixed</span> <strong>Audit Logging Error:</strong>
            <ul>
              <li>Resolved a "Data truncated" database error that occurred when adding a payment. The `log_activity`
                call in `update_test_item.php` was corrected to use the valid 'UPDATE' action type instead of 'PAYMENT'.
              </li>
            </ul>
          </li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.2.7 <span class="badge live">Major Feature Release</span></h2>
        <div class="meta">
          October 12, 2025 · Speech Therapy Integration, Time Slot Management, Appointment System, Database
          Enhancements, UI/UX Improvements
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> <strong>Speech Therapy Service Integration:</strong>
            <ul>
              <li>Introduced comprehensive speech therapy support alongside existing physiotherapy services.</li>
              <li>New dedicated API endpoint <code>add_speech_patient.php</code> for speech therapy patient registration
                with specialized treatment plans.</li>
              <li>Speech therapy pricing: ₹500 per session (daily) or ₹11,000 package for 26 days.</li>
              <li>Separate registration workflow with "Add to Speech" button in patient registration interface.</li>
              <li>Service type distinction in database with <code>service_type</code> field ('physio' or
                'speech_therapy').</li>
            </ul>
          </li>
          <li><span class="tag added">Added</span> <strong>Advanced Time Slot Management System:</strong>
            <ul>
              <li>Mandatory time slot selection for all treatment plans during patient registration.</li>
              <li>Time slot validation ensures no patient can be registered without selecting an appointment time.</li>
              <li>Integration with existing appointment scheduling infrastructure.</li>
              <li>Support for both physiotherapy and speech therapy time slot booking.</li>
            </ul>
          </li>
          <li><span class="tag added">Added</span> <strong>Patient Appointments Management System:</strong>
            <ul>
              <li>New <code>patient_appointments</code> database table for centralized appointment tracking.</li>
              <li>Automatic first appointment creation when patient is registered for treatment.</li>
              <li>Appointment status tracking (scheduled, completed, cancelled).</li>
              <li>Service-type specific appointment management for both physio and speech therapy.</li>
              <li>Branch-wise appointment organization with proper foreign key relationships.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Registration Interface & User Experience:</strong>
            <ul>
              <li>Enhanced registration drawer with dual service options (Physio/Speech).</li>
              <li>Dedicated speech therapy registration form with specialized pricing calculations.</li>
              <li>Improved treatment option selection interface with visual cost indicators.</li>
              <li>Dynamic calculation system for speech therapy packages and daily sessions.</li>
              <li>Enhanced form validation and error handling for both service types.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Payment & Billing System:</strong>
            <ul>
              <li>Extended payment tracking to support both physiotherapy and speech therapy services.</li>
              <li>Service-specific discount approval workflows.</li>
              <li>Enhanced advance payment recording with proper service type attribution.</li>
              <li>Updated due amount calculations for mixed service types.</li>
            </ul>
          </li>
          <li><span class="tag added">Added</span> <strong>Enhanced Inquiry Management:</strong>
            <ul>
              <li>New inquiry type classification system supporting physio and speech therapy inquiries.</li>
              <li>Communication type tracking (phone, web, email) for better inquiry source management.</li>
              <li>Improved inquiry reporting with service-type filtering capabilities.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Expense Management System:</strong>
            <ul>
              <li>Enhanced expense tracking with "Expense Done By" field for personnel accountability.</li>
              <li>"Expense For" categorization (Office, Marketing, Equipment, etc.) for better expense classification.
              </li>
              <li>Improved expense reporting and categorization for better financial insights.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Patient Data Management:</strong>
            <ul>
              <li>Enhanced patient search functionality with service type filtering.</li>
              <li>Improved patient profile display with service-specific treatment information.</li>
              <li>Better data organization for mixed service type patients.</li>
              <li>Enhanced patient photo display and management across all interfaces.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Dashboard & System Interface:</strong>
            <ul>
              <li>Updated system banners with improved styling and responsiveness.</li>
              <li>Enhanced notification system for various service types.</li>
              <li>Improved mobile responsiveness across all new features.</li>
              <li>Better accessibility features for speech therapy workflow.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Database Architecture & Performance:</strong>
            <ul>
              <li>Comprehensive database schema updates to support multi-service architecture.</li>
              <li>Optimized foreign key relationships and indexing for better performance.</li>
              <li>Enhanced data integrity with proper constraints and validations.</li>
              <li>Future-ready architecture for additional service types.</li>
            </ul>
          </li>
          <li><span class="tag added">Added</span> <strong>Treatment Time Slot Integration:</strong>
            <ul>
              <li>New <code>treatment_time_slot</code> field in patients table for initial time slot tracking.</li>
              <li>Integration with appointment scheduling system for seamless time management.</li>
              <li>Time slot API enhancement for treatment-specific scheduling.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Code Quality & Documentation:</strong>
            <ul>
              <li>Enhanced error handling and logging across all new APIs.</li>
              <li>Improved code documentation and inline comments.</li>
              <li>Better security validation for all speech therapy endpoints.</li>
              <li>Comprehensive database modification documentation in <code>dbmodif.txt</code>.</li>
            </ul>
          </li>
          <li><span class="tag fixed">Fixed</span> <strong>Package Treatment Duration:</strong>
            <ul>
              <li>Corrected physiotherapy package duration from 22 days to 21 days for consistency.</li>
              <li>Speech therapy package standardized to 26 days as per service requirements.</li>
            </ul>
          </li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.2.6 <span class="badge live">Feature & Improvements</span></h2>
        <div class="meta">
          October 11, 2025 · UID System, Logo Unification, Table Enhancements, System Update Banner, Bug Fixes
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> <strong>Test UID System:</strong>
            <ul>
              <li>Introduced a unique, date-prefixed <code>test_uid</code> for all test records (e.g.,
                <code>23101101</code> for the first test on 2023-10-11).
              </li>
              <li>UID is auto-generated on test submission, ensuring traceability and easier referencing in reports and
                UI.</li>
              <li>Database migration: Added <code>test_uid</code> column to the <code>tests</code> table with a unique
                index.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Logo Handling Across All Views:</strong>
            <ul>
              <li>All major admin/reception views (patients, registration, billing, attendance, reports, schedule, etc.)
                now display the correct branch logo dynamically.</li>
              <li>Fallback placeholder is shown if no logo is set, ensuring consistent branding and a professional look.
              </li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Table Columns & Filtering:</strong>
            <ul>
              <li>Registration and patient tables now display the new UID columns (<code>patient_uid</code>,
                <code>test_uid</code>) for easier cross-referencing.
              </li>
              <li>Added "Inquiry Type" column and filter to registration and appointment tables, allowing staff to
                filter by consultation type.</li>
              <li>Test and patient tables updated to use the new UID columns as primary identifiers.</li>
            </ul>
          </li>
          <li><span class="tag added">Added</span> <strong>System Update Banner & Overlay:</strong>
            <ul>
              <li>Dashboard now features a dismissible banner and overlay for scheduled maintenance or urgent system
                updates.</li>
              <li>Banner and overlay can be toggled via JavaScript, with customizable messages for real-time
                communication to users.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Photo Column Sizing:</strong>
            <ul>
              <li>Patient photo and initials columns in tables increased to 60x60px for better visibility and a more
                modern appearance.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Table Search, Filter, and Sort Logic:</strong>
            <ul>
              <li>Fixed column index mismatches in patients, registration, and test JS, ensuring accurate filtering and
                sorting by doctor, treatment, status, and new columns.</li>
            </ul>
          </li>
          <li><span class="tag fixed">Fixed</span> <strong>Logo Path Consistency:</strong>
            <ul>
              <li>All logo image paths now use <code>/admin/</code> as the base, resolving issues with missing or broken
                images in various modules and print views.</li>
            </ul>
          </li>
          <li><span class="tag fixed">Fixed</span> <strong>UI/UX Bugs:</strong>
            <ul>
              <li>Corrected table header and cell mismatches, improved accessibility, and fixed minor layout glitches in
                modals and drawers.</li>
            </ul>
          </li>
          <li><span class="tag improved">Improved</span> <strong>Database & Backend:</strong>
            <ul>
              <li>Updated backend logic to support new UID fields and ensure all APIs and reports fetch and display the
                correct identifiers.</li>
            </ul>
          </li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.2.5 <span class="badge live">Feature</span></h2>
        <div class="meta">
          October 10, 2025 · Patient Photo Capture, Table Enhancements, Schedule Fix, Database Export ·
          <a href="#">View Changes</a>
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> <strong>Patient Photo Capture & Upload:</strong> New modal and
            backend API allow capturing and uploading patient photos directly from the registration table. Photos are
            now displayed in the registration list, with fallback to initials if no photo is present.</li>
          <li><span class="tag improved">Improved</span> <strong>Registration Table:</strong> Added a "Photo" column to
            the registration table, showing the patient's photo or initials, and improved accessibility for photo
            actions.</li>
          <li><span class="tag improved">Improved</span> <strong>Test Table:</strong> The tests table now displays the
            "Paid Amount" column for better financial tracking.</li>
          <li><span class="tag fixed">Fixed</span> <strong>Schedule Time Slot:</strong> The weekly schedule now starts
            at 9:00 AM instead of 11:00 AM for more accurate appointment display.</li>
          <li><span class="tag fixed">Fixed</span> Issues with photo upload and database update logic for patient
            registration. Improved error handling and security in the photo upload API.</li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.2.4 <span class="badge live">Merged</span></h2>
        <div class="meta">
          October 08, 2025 · Responsive & Mobile Experience, UI/UX, CSS, Bug Fixes ·
          <a href="#">View Changes</a>
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> <strong>Mobile Blocker Overlay:</strong> All admin/reception views
            now display a blocker overlay on mobile devices, guiding users to download the app and preventing
            unsupported access.</li>
          <li><span class="tag added">Added</span> <strong>Hamburger Menu & Responsive Navigation:</strong> Introduced a
            hamburger menu and improved navigation for better usability on tablets and smaller screens.</li>
          <li><span class="tag improved">Improved</span> <strong>Mobile-Friendly Tables:</strong> All major tables in
            reports, patients, billing, attendance, and inquiry modules now use <code>data-label</code> attributes for
            card-style layouts on mobile.</li>
          <li><span class="tag improved">Improved</span> <strong>Filter Bars & Drawers:</strong> Enhanced filter bars,
            search containers, and drawer panels for consistent responsive behavior across all admin views.</li>
          <li><span class="tag improved">Improved</span> <strong>Navigation Icons:</strong> Unified and modernized icon
            usage in navigation and menus.</li>
          <li><span class="tag improved">Improved</span> <strong>CSS Refactoring:</strong> Major updates to chat,
            dashboard, inquiry, and registration CSS for readability, maintainability, and theme consistency. Removed
            unused CSS files.</li>
          <li><span class="tag added">Added</span> <strong>Download App Page Enhancements:</strong> Expanded the
            download-app page to showcase upcoming Android/iOS app options for mobile and tablet, with new card layouts
            and responsive design.</li>
          <li><span class="tag improved">Improved</span> <strong>Download-app Styles:</strong> Updated styles for a
            modern, grid-based layout.</li>
          <li><span class="tag added">Added</span> <strong>nav_toggle.js:</strong> New script for handling hamburger
            menu toggling and navigation on smaller screens.</li>
          <li><span class="tag fixed">Fixed</span> <strong>Drawer & Overlay Z-Index:</strong> Fixed z-index and stacking
            issues in drawers and overlays.</li>
          <li><span class="tag improved">Improved</span> <strong>Accessibility & Markup:</strong> Improved accessibility
            and markup structure in all major admin views.</li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.2.3 <span class="badge live">Feature</span></h2>
        <div class="meta">
          October 05, 2025 · New Feature & Critical Fixes ·
          <a href="./views/schedule.php">View Feature</a>
        </div>
        <ul class="changes">
          <li>
            <span class="tag added">Added</span>
            Refactor CSS styles for consistency and readability; add online inquiry and booked inquiry PHP views with
            appointment management functionality.
          </li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.2.2 <span class="badge live">Feature</span></h2>
        <div class="meta">
          October 02, 2025 · New Feature & Critical Fixes ·
          <a href="./views/schedule.php">View Feature</a>
        </div>
        <ul class="changes">
          <li>
            <span class="tag added">Added</span> <strong>Comprehensive Weekly Schedule Viewer:</strong> Implemented a
            new, full-page scheduling interface to replace the basic dashboard widget. This provides staff with a
            powerful tool for long-term planning and at-a-glance weekly availability.
          </li>
          <li>
            <span class="tag improved">Improved</span> <strong>Intuitive 'Time-First' Layout:</strong> The schedule has
            been pivoted to display time slots as rows and days of the week as columns. This new orientation is
            optimized for a clinical workflow, making it easier to see how busy a specific day is and identify open
            slots.
          </li>
          <li>
            <span class="tag added">Added</span> <strong>Interactive Appointment Details:</strong> All appointments on
            the schedule are now interactive. Clicking an appointment card opens a slide-out details drawer, which
            fetches and displays critical patient information (UID, contact info, chief complaint, etc.) via a dedicated
            API, enhancing staff efficiency.
          </li>
          <li>
            <span class="tag fixed">Fixed</span> <strong>Critical Time Zone Discrepancy:</strong> Resolved a major bug
            where the application would display the previous day's date after midnight IST due to the server running on
            UTC. A global time zone setting (`Asia/Kolkata`) was implemented, ensuring date and time accuracy across the
            entire platform and preventing future client-facing errors.
          </li>
          <li>
            <span class="tag fixed">Fixed</span> <strong>Erratic Week Navigation:</strong> Corrected a flawed date
            calculation that caused the "Previous Week" button to skip a full week when navigating from a Sunday. The
            navigation logic is now explicit and reliable, providing a predictable user experience.
          </li>
          <li>
            <span class="tag improved">Improved</span> <strong>Legacy Data Compatibility:</strong> The appointment
            details API has been fortified with a fallback system. It can now fetch information for both modern patient
            records using the new UID system and legacy records using their original registration ID, preventing errors
            and ensuring a seamless experience for all data.
          </li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.2.1 <span class="badge progress">Patch</span></h2>
        <div class="meta">
          September 30, 2025 · Features and Bug Fixes ·
          <a href="#">View Changes</a>
        </div>
        <ul class="changes">
          <li>
            <span class="tag added">Added</span>Implemented a real-time chat system allowing users within the same
            branch to communicate directly from the dashboard.
          </li>
          <li>
            <span class="tag added">Added</span>Introduced a referral tracking system with a 'Referred By' field in the
            registration form and related reports.
          </li>
          <li>
            <span class="tag added">Added</span>Enhanced expense management with a new 'Payment Method' selection field
            for better financial tracking.
          </li>
          <li>
            <span class="tag improved">Improved</span>The new chat interface is now fully responsive and includes a
            search function to quickly filter the user list.
          </li>
          <li>
            <span class="tag fixed">Fixed</span>A critical bug where the appointment time slot dropdown only showed
            availability for the current day. Slots now update dynamically based on the selected date.
          </li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.2.0 <span class="badge merged">Merged</span></h2>
        <div class="meta">September 27, 2025 · Reporting, Auditing & Expenses ·
          <a href="#">View changes</a>
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> A comprehensive **Reporting Suite** with four new dynamic report
            pages: <strong>Test Reports</strong>, <strong>Registration Reports</strong>, <strong>Patient
              Reports</strong>, and <strong>Inquiry Reports</strong>.</li>
          <li><span class="tag added">Added</span> Dynamic, server-side filtering for all reports, allowing users to
            query data by date ranges and other relevant criteria (e.g., test name, patient status, referral source).
          </li>
          <li><span class="tag added">Added</span> <strong>AJAX functionality</strong> to all report pages, enabling
            interactive filtering and data refreshes without requiring a full page reload.</li>
          <li><span class="tag improved">Improved</span> User experience on report pages with the addition of loading
            indicators during data fetching and a dynamic **filter status message** that confirms the action and
            displays the number of results found.</li>

          <li><span class="tag added">Added</span> A new <strong>`audit_log`</strong> database table to provide a
            comprehensive and secure trail of all significant user actions.</li>
          <li><span class="tag added">Added</span> A centralized <strong>`logger.php`</strong> utility with a
            `log_activity()` function to handle all log insertions consistently. The logger captures user info, branch,
            action type, and detailed JSON snapshots of data changes (`details_before` and `details_after`).</li>
          <li><span class="tag improved">Improved</span> All critical API endpoints (for creating/updating inquiries,
            registrations, and tests) by integrating them with the new audit logging system.</li>
          <li><span class="tag improved">Improved</span> The <strong>`logout.php`</strong> script to be more secure by
            fully unsetting session variables, destroying the session cookie, and logging the `LOGOUT` event for
            security auditing.</li>
          <li><span class="tag fixed">Fixed</span> A critical dependency by updating the <strong>`login.php`</strong>
            script to correctly store the `username` in the session, which is now required for all logging activities.
          </li>

          <li><span class="tag added">Added</span> A new <strong>`expenses`</strong> database table to track clinic
            operational costs, designed based on the physical payment voucher.</li>
          <li><span class="tag added">Added</span> A new <strong>`expenses.php`</strong> view for full management of
            clinic expenses, including a form for adding new vouchers and a table to display expense history.</li>
          <li><span class="tag added">Added</span> A **popup modal** for the "Add New Expense" form, improving the main
            view's UI by hiding the form until it's needed.</li>
          <li><span class="tag added">Added</span> Client-side JavaScript to automatically convert numeric amounts to
            their word representation in the expense form, improving data entry speed and accuracy.</li>
          <li><span class="tag improved">Improved</span> The expense form layout was refactored into a clean, two-column
            "table-like" structure for better readability and usability.</li>

          <li><span class="tag added">Added</span> An API to handle status updates for `quick_inquiry` and
            `test_inquiry` tables, which now also logs the "before" and "after" state of the change.</li>
          <li><span class="tag improved">Improved</span> The database schema with the addition of the `expenses` and
            `audit_log` tables, including foreign key constraints and appropriate indexes.</li>
        </ul>
      </div>


      <div class="log-entry">
        <h2>v2.1.9 <span class="badge merged">Merged</span></h2>
        <div class="meta">September 26, 2025 · Tests, Payments & Patient Management ·
          <a href="#">View changes</a>
        </div>
        <ul class="changes">
          <!-- API Changes -->
          <li><span class="tag added">Added</span> <strong>update_payment.php</strong> API to handle inline payment
            updates for tests, including validation of amounts, automatic adjustment of <code>advance_amount</code> and
            <code>due_amount</code>, and dynamic <code>payment_status</code> updates.
          </li>
          <li><span class="tag added">Added</span> <strong>update_payment_status.php</strong> API for manual payment
            status updates (<code>pending</code>, <code>partial</code>, <code>paid</code>) for each test record.</li>
          <li><span class="tag added">Added</span> <strong>update_test_status.php</strong> API to manage test status
            changes (<code>pending</code>, <code>completed</code>, <code>cancelled</code>) dynamically from the UI.</li>
          <li><span class="tag added">Added</span> <strong>get_patient_summary.php</strong> API to fetch patient summary
            for printing and modal display, including total paid, today’s payment, and attendance details.</li>
          <li><span class="tag improved">Improved</span> <strong>fetch_patient.php</strong> and
            <strong>fetch_test.php</strong> APIs to provide more comprehensive patient/test details, including
            attendance, treatment info, and payment summaries.
          </li>

          <!-- JavaScript Changes -->
          <li><span class="tag added">Added</span> drawer-based inline editing for payments and statuses in
            <strong>patients.js</strong>, <strong>billings.js</strong>, and <strong>test.js</strong>, replacing prompt
            popups with interactive input fields and save buttons.
          </li>
          <li><span class="tag added">Added</span> toast notifications for success/error messages in payment and status
            updates with auto-dismiss and optional page reload after 3 seconds.</li>
          <li><span class="tag improved">Improved</span> JS logic for reloading drawer content dynamically after updates
            to maintain context and display accurate, up-to-date data.</li>

          <!-- CSS Changes -->
          <li><span class="tag improved">Improved</span> <strong>billings.css</strong>, <strong>patients.css</strong>,
            <strong>dashboard.css</strong>, and <strong>test.css</strong> for better layout, responsiveness, and UI
            consistency across light and dark themes.
          </li>

          <!-- View Changes -->
          <li><span class="tag added">Added</span> new <strong>expenses.php</strong> view with session and branch-based
            restrictions for reporting purposes.</li>
          <li><span class="tag improved">Improved</span> <strong>billing.php</strong>, <strong>patients.php</strong>,
            <strong>appointments.php</strong>, and <strong>attendance.php</strong> to integrate drawer-based
            patient/test details and inline payment/status updates.
          </li>
          <li><span class="tag improved">Improved</span> <strong>dashboard.php</strong>, <strong>reports.php</strong>,
            and <strong>tests.php</strong> with dynamic content loading, structured patient/test summaries, and
            responsive layouts.</li>
          <li><span class="tag fixed">Fixed</span> inconsistencies in drawer open/close behavior, ensuring smooth
            animations and proper data refresh across multiple views.</li>
          <li><span class="tag fixed">Fixed</span> edge cases in payment updates where invalid or excessive amounts
            caused errors, now validated both client- and server-side.</li>
          <li><span class="tag added">Added</span> support for showing attendance as <code>completed/total days</code>
            in patient summary modals for better progress tracking.</li>

          <!-- Misc -->
          <li><span class="tag added">Added</span> <strong>changelog.html</strong> to maintain a structured version
            history with detailed entries.</li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.1.8 <span class="badge merged">Merged</span></h2>
        <div class="meta">September 20, 2025 · Billing & Patients Module ·
          <a href="#">View changes</a>
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> comprehensive <strong>billing overview</strong> page with patient
            billing
            details, including <code>total bill</code>, <code>total paid</code>, and <code>outstanding dues</code>.</li>
          <li><span class="tag added">Added</span> interactive <strong>billing history drawer</strong> for each patient,
            displaying detailed transaction records with payment method, amount, and remarks.</li>
          <li><span class="tag added">Added</span> <strong>patients overview</strong> page to display core patient
            information,
            treatment details, attendance records, and effective balance calculations in a structured view.</li>
          <li><span class="tag improved">Improved</span> <strong>error handling and session management</strong> across
            billing
            and patient modules for enhanced security and stability.</li>
          <li><span class="tag improved">Improved</span> <strong>drawer interface</strong> with right-side animation,
            dynamic
            loading indicators, and responsive scaling for smaller screens.</li>
          <li><span class="tag improved">Improved</span> overall <strong>UI and responsiveness</strong> with optimized
            layouts,
            larger calendar boxes, and better alignment in both light and dark themes.</li>
          <li><span class="tag fixed">Fixed</span> inconsistencies in <code>patient data fetching</code> and <code>billing
        history rendering</code> that previously caused missing or duplicated entries.</li>
          <li><span class="tag fixed">Fixed</span> drawer close/open issues on <code>billing.php</code> and
            <code>attendance.php</code> ensuring smoother interactions.
          </li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.1.7 <span class="badge merged">Merged</span></h2>
        <div class="meta">September 12, 2025 · Patient Registration Module ·
          <a href="#">View changes</a>
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> <strong>toast notifications</strong> across patient registration
            workflows for real-time feedback on successful registrations, errors, and validations.</li>
          <li><span class="tag improved">Improved</span> <strong>UI responsiveness</strong> on <code>inquiry.php</code>
            and <code>dashboard.php</code> to provide smoother form submissions and slot handling without page reloads.
          </li>
          <li><span class="tag added">Added</span> full <strong>dark mode support</strong> to registration forms,
            tables, and drawer components for seamless theme consistency.</li>
          <li><span class="tag improved">Improved</span> overall <strong>user experience</strong> by refining form
            validation messages, reducing flicker on updates, and aligning styles with the global design palette.</li>
          <li><span class="tag fixed">Fixed</span> minor layout glitches in the <code>appointment slot selector</code>
            when switching between time slots in dark mode.</li>
        </ul>
      </div>


      <div class="log-entry">
        <h2>v2.1.6 <span class="badge merged">Merged</span></h2>
        <div class="meta">September 13, 2025 · Patient Registration & Management Module ·
          <a href="https://github.com/Prospine/proadmin/commit/95333dd661354788b7373128cbf043a9f92baab4"> View
            changes</a>
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> <code>check_patient.php</code> API to <strong>verify patient
              existence by registration ID</strong>, preventing duplicates and ensuring a smoother registration
            workflow. The API responds with clear JSON status flags for integration with forms and popups.</li>

          <li><span class="tag added">Added</span> <code>get_registration.php</code> API to <strong>fetch complete
              patient registration records</strong> (name, demographics, visit history, treatment details). This enables
            real-time data retrieval for UI components like drawers and popups.</li>

          <li><span class="tag added">Added</span> <code>save_remark.php</code> API for <strong>attaching remarks or
              notes</strong> directly to patient registrations. Supports multiple entries per patient and timestamp
            logging, creating a mini audit trail for doctors and staff.</li>

          <li><span class="tag added">Added</span> <code>update_registration_status.php</code> API to <strong>modify
              patient registration status</strong> (Pending → Consulted → Closed). Includes validation to avoid invalid
            transitions and ensures backend + UI consistency.</li>

          <li><span class="tag added">Added</span> comprehensive <code>registration.css</code> stylesheet with
            <strong>modular design patterns</strong> — improved spacing, typography, drawer animations, table alignment,
            and popup styling for a cleaner, professional look.
          </li>

          <li><span class="tag added">Added</span> <code>registration.php</code> view — a dedicated interface for
            managing <strong>patient registration lifecycle</strong>. Includes a searchable, sortable table with inline
            actions and real-time updates via AJAX.</li>

          <li><span class="tag added">Added</span> patient info <strong>drawer component</strong> that slides in
            contextually, allowing staff to <em>view patient details, registration status, and remarks</em> without
            navigating away from the dashboard. Optimized for quick lookups and updates.</li>

          <li><span class="tag added">Added</span> <strong>Add Patient popup</strong> with integrated treatment plan
            creation. Enables direct patient onboarding from any workflow — supports instant registration, plan linking,
            and validation checks in one flow.</li>

          <li><span class="tag improved">Improved</span> overall error handling — all new APIs now return
            <strong>structured JSON with success/error flags and messages</strong>. Edge cases like missing IDs, invalid
            status changes, and DB errors are handled gracefully.
          </li>

          <li><span class="tag improved">Improved</span> validation rules across the registration module — stricter
            field checks, consistent use of <code>htmlspecialchars()</code> for sanitization, and standardized response
            codes for easier frontend integration.</li>

          <li><span class="tag improved">Improved</span> registration workflow efficiency by combining <strong>lookup →
              add → manage</strong> flows into a single UI. Staff can now check if a patient exists, register them if
            not, and attach treatment plans without page reloads.</li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.1.5 <span class="badge progress">Progress</span></h2>
        <div class="meta">September 12, 2025 · Changelog Module · Nikhil Gautam ·
          <a href="https://github.com/Prospine/proadmin/commit/fdc4ab591eb9b24c147227e1d6efb5ffeab5de75">View
            changes</a>
        </div>
        <ul class="changes">
          <li>
            <span class="tag improved">
              Improved
            </span> Fixed url in past release.
          </li>
        </ul>
      </div>


      <div class="log-entry">
        <h2>v2.1.4 <span class="badge merged">Merged</span></h2>
        <div class="meta">September 12, 2025 · Inquiry Management & Dashboard Module ·
          <a href="#">View
            changes</a>
        </div>
        <ul class=" changes">
          <li><span class="tag added">Added</span> <code>get_slots.php</code> API to fetch <strong>half-hourly
              appointment slots</strong> (11 AM – 7 PM) dynamically, ensuring real-time availability.</li>
          <li><span class="tag added">Added</span> smart <strong>slot disabling system</strong> on the dashboard that
            prevents users from booking already filled slots, by checking <code>registrations.appointment_time</code>.
          </li>
          <li><span class="tag improved">Improved</span> <code>inquiry.php</code> with <strong>stronger session
              handling</strong>, CSRF token verification, and robust error reporting for stability in production.</li>
          <li><span class="tag added">Added</span> <code>insert_inquiry_reg.php</code> and
            <code>insert_inquiry_test.php</code> APIs with strict <strong>server-side validation</strong>, required
            field checks, and <strong>payment status logic</strong>.
          </li>
          <li><span class="tag improved">Improved</span> inquiry UI with <strong>structured forms</strong> for both
            quick inquiries and test inquiries, reducing clutter and making fields easier to navigate.</li>
          <li><span class="tag added">Added</span> permanent <strong>dark mode styling</strong> for inputs, tables,
            and
            dropdowns — including <strong>select menus</strong> which now remain dark even when expanded.</li>
          <li><span class="tag improved">Improved</span> background and component colors for dark mode using smooth
            <strong>transition effects</strong> across input fields, drawer panels, and table rows.
          </li>
          <li><span class="tag fixed">Fixed</span> dropdown issue where <strong>select fields</strong> reverted to
            white
            on expand — now they stay fully consistent with dark mode theme.</li>
          <li><span class="tag fixed">Fixed</span> database query handling in inquiry fetch APIs to resolve
            <code>SQLSTATE[HY093]: Invalid parameter number</code> errors.
          </li>
          <li><span class="tag added">Added</span> developer-friendly <strong>error messages</strong> and fallback
            handling in case of API or DB failures, improving debugging and reliability.</li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.1.3 <span class="badge merged">Merged</span></h2>
        <div class="meta">September 9, 2025 · Inquiry Management Module ·<a
            href="https://github.com/Prospine/proadmin/commit/dfcf1556a649d0e94499647c7497968e7c4c6639">View
            changes</a>
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> <code>fetch_inquiry.php</code> endpoint to retrieve inquiry details
            based on <strong>type</strong> (<code>quick</code> / <code>test</code>) and <strong>inquiry_id</strong>.
          </li>
          <li><span class="tag added">Added</span> <code>update_inquiry_status.php</code> to update inquiry status
            dynamically
            and return JSON responses.</li>
          <li><span class="tag added">Added</span> new <strong>drawer component</strong> that slides in from the
            right,
            showing detailed inquiry information with clean styling.</li>
          <li><span class="tag improved">Improved</span> <code>inquiry.php</code> by displaying both<strong>Quick
              Inquiries</strong> and <strong>Test Inquiries</strong> in structured tables with
            updateable statuses.
          </li>
          <li><span class="tag added">Added</span> <strong>status pills</strong> (<code>Visited</code>,
            <code>Cancelled</code>, <code>Pending</code>) with permanent color coding
            for easier recognition across both tables.
          </li>
          <li><span class="tag improved">Improved</span> <code>inquiry.css</code> with compact,
            modern styles for the drawer and table, using <strong>flexbox</strong> and<strong>two-column
              layouts</strong> for better readability.
          </li>
          <li><span class="tag added">Added</span> elegant <strong>dark theme</strong> support with smooth
            <code>transition effects</code> for background, border, and text color changes.
          </li>
          <li><span class="tag fixed">Fixed</span> issue where status colors
            only appeared temporarily on update — now they remain permanent across reloads.</li>
          <li><span class="tag improved">Improved</span> <code>inquiry.js</code> to distinguish
            between Quick and Test tables when opening the drawer and fetching data.</li>
          <li><span class="tag added">Added</span> <strong>toast notifications</strong> to confirm
            successful status updates and other actions.</li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.1.2 <span class="badge merged">Merged</span></h2>
        <div class="meta">September 10, 2025 · Dashboard & Schedule Module ·<a
            href="https://github.com/Prospine/proadmin/commit/1277dca66f50e87d98377f677ae28c5b0b387548"> View
            changes</a>
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> brand-new <code>Schedule</code> section in the dashboard,
            displaying upcoming and recent appointments in a structured, timeline-based view.</li>
          <li><span class="tag improved">Improved</span> schedule rendering logic to automatically <strong>group
              appointments by date</strong>,
            ensuring that each day’s events are clearly separated and easier to scan.</li>
          <li><span class="tag added">Added</span> <code>Status-based color coding</code> for appointments.
            Events now dynamically change appearance based on whether they are
            <strong>Pending</strong>,<strong>Consulted</strong>, or <strong>Other</strong>,
            making it easier to identify appointment outcomes at a glance.
          </li>
          <li><span class="tag added">Added</span> support for <code>No Appointments</code> states.
            On days without any scheduled appointments, a clean placeholder message is shown instead of an empty
            timeline.</li>
          <li><span class="tag improved">Improved</span> day selection bar (the <strong>Days Strip</strong>) to
            highlight the current day
            and provide quick navigation across past and future dates. The view automatically covers a <strong>date
              range around today</strong> for context.</li>
          <li><span class="tag fixed">Fixed</span> critical <code>Undefined variable $schedules</code> warning by
            initializing fallback arrays and ensuring schedules are always handled safely, even when no data is
            present.
          </li>
          <li><span class="tag improved">Improved</span> appointment fetching logic by ensuring queries
            pull from the correct <code>registration</code> table with proper <strong>branch-level filtering</strong>
            and <strong>date constraints</strong>.</li>
          <li><span class="tag added">Added</span> <code>Dark Mode</code> toggle in the dashboard header.
            Users can now switch between light and dark themes with a single click, and the choice persists across
            sessions.</li>
          <li><span class="tag added">Added</span> dedicated <code>dark.css</code> theme file,
            leveraging <strong>CSS variables</strong> for consistent colors and introducing a subtle <strong>gradient
              background</strong>
            for a polished visual appearance.</li>
          <li><span class="tag improved">Improved</span> theme management logic using <code>localStorage</code>,
            so that user preferences for light/dark mode are remembered automatically on page reload.</li>
          <li><span class="tag improved">Improved</span> CSRF handling and fallback defaults for dashboard metrics,
            preventing form rendering issues when CSRF tokens are missing or uninitialized.</li>
          <li><span class="tag fixed">Fixed</span> multiple cases where the schedule or timeline
            would fail to render correctly when no data was returned by the query.</li>
          <li><span class="tag improved">Improved</span> the dashboard’s overall data-fetching flow by
            adding<strong>try/catch safety wrappers</strong>, preventing the entire page from breaking if a single
            query
            fails.
          </li>
          <li><span class="tag added">Added</span> scalable structure for future <code>Event Types</code>,
            so the schedule view can later support different appointment categories (consultations, tests, follow-ups,
            etc.).</li>
        </ul>
      </div>

      <div class="log-entry">
        <h2>v2.1.1 <span class="badge merged">Merged</span></h2>
        <div class="meta">September 11, 2025 · Admin Portal & Reception Dashboard ·<a
            href="https://github.com/Prospine/proadmin/commit/8ac2861392073305a8fe59732a51230f7a0c655c">View
            changes</a>
        </div>
        <ul class="changes">
          <li><span class="tag added">Added</span> <code>login.js</code> to enable password visibility toggle for
            improved UX.</li>
          <li><span class="tag added">Added</span> <code>index.html</code> as the landing page for the admin portal.
          </li>
          <li><span class="tag added">Added</span> <code>login.php</code> with session management, CSRF protection,
            and
            brute force prevention to enhance login security.</li>
          <li><span class="tag added">Added</span> CSS styles for <strong>reception dashboard</strong>
            and<strong>welcome page</strong> for consistent UI.
          </li>
          <li><span class="tag added">Added</span> <code>welcome.js</code> to display a loading progress animation and
            redirect users post-login.</li>
          <li><span class="tag added">Added</span> <code>dashboard.html</code> for the reception dashboard, featuring
            navigation and card-based layout for easy access to key sections.</li>
          <li><span class="tag improved">Improved</span> overall login flow with enhanced session security, preventing
            unauthorized access and session hijacking.</li>
        </ul>
      </div>

    </div>
  </main>

  <footer>
    © 2025 Prospine · Made with ☕ + sanity sacrifices
    <footer>
      © 2025 Prospine · Made with ☕ + sanity sacrifices
      <script>
        // Simple search/filter for changelog entries
        document.addEventListener('DOMContentLoaded', function () {
          var searchInput = document.getElementById('changelog-search');
          if (searchInput) {
            searchInput.addEventListener('input', function () {
              var query = this.value.toLowerCase();
              var entries = document.querySelectorAll('.log-entry, .unreleased-modern');
              entries.forEach(function (entry) {
                if (query === '' || entry.textContent.toLowerCase().indexOf(query) !== -1) {
                  entry.style.display = '';
                } else {
                  entry.style.display = 'none';
                }
              });
            });
          }

          // Fetch and display CHANGELOG.md content (sync preview)
          fetch('../../../../CHANGELOG.md')
            .then(resp => resp.ok ? resp.text() : Promise.reject('No changelog'))
            .then(md => {
              // Simple markdown to HTML conversion for preview (headings, lists)
              var preview = document.createElement('section');
              preview.style.background = '#f1f5f9';
              preview.style.border = '1.5px solid #e5e7eb';
              preview.style.borderRadius = '10px';
              preview.style.margin = '2.5rem auto';
              preview.style.maxWidth = '900px';
              preview.style.padding = '1.5rem 2rem';
              preview.innerHTML = '<h2 style="color:#6366f1;">CHANGELOG.md Preview</h2>' +
                md.replace(/^### (.*)$/gm, '<h4>$1</h4>')
                  .replace(/^## (.*)$/gm, '<h3>$1</h3>')
                  .replace(/^# (.*)$/gm, '<h2>$1</h2>')
                  .replace(/^- (.*)$/gm, '<li>$1</li>')
                  .replace(/\n\n/g, '<br>');
              document.body.insertBefore(preview, document.querySelector('footer'));
            });
        });
      </script>
    </footer>

</html>